<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>Matrix Soul - Muse Engine</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: 'Courier New', monospace; }
        #knowledge-panel {
            position: fixed; top: 20px; left: 20px; width: 300px; 
            background: rgba(0, 20, 0, 0.85); color: #00ff41; 
            padding: 20px; border-radius: 5px; border: 1px solid #00ff41;
            backdrop-filter: blur(8px); max-height: 85vh; overflow-y: auto;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.2); z-index: 100;
        }
        h3 { margin: 0 0 15px 0; font-size: 1.2em; border-bottom: 2px solid #00ff41; padding-bottom: 10px; text-shadow: 0 0 5px #00ff41; }
        .item { margin-bottom: 18px; border-bottom: 1px solid rgba(0, 255, 65, 0.2); padding-bottom: 8px; }
        .time { font-size: 0.75em; color: #008f11; margin-bottom: 5px; }
        .title-link { text-decoration: none; color: #00ff41; font-weight: bold; font-size: 0.9em; display: block; }
        .title-link:hover { color: #fff; text-shadow: 0 0 10px #00ff41; }
        /* Êç≤Ëª∏ÁæéÂåñ */
        #knowledge-panel::-webkit-scrollbar { width: 4px; }
        #knowledge-panel::-webkit-scrollbar-thumb { background: #00ff41; }
    </style>
</head>
<body>
    <div id="knowledge-panel">
        <h3>‚ö° Êï∏‰ΩçÂÅµÂØü‰∏≠ÂøÉ</h3>
        <div id="list">Ê≠£Âú®ÂêåÊ≠•Áü©Èô£Êï∏Êìö...</div>
    </div>
<script>
let streams = [];
const symbolSize = 20;
const GITHUB_BASE = "https://github.com/OnicLiu/Openclaw/blob/main/";

class Symbol {
    constructor(x, y, speed, first) {
        this.x = x; this.y = y; this.speed = speed; this.first = first;
        this.value = ''; this.switchInterval = round(random(5, 25));
        this.setToRandomSymbol();
    }
    setToRandomSymbol() {
        if (frameCount % this.switchInterval == 0) {
            this.value = String.fromCharCode(0x30A0 + round(random(0, 96)));
        }
    }
    rain() { this.y = (this.y >= height) ? 0 : this.y + this.speed; }
}

class Stream {
    constructor() {
        this.symbols = [];
        this.totalSymbols = round(random(5, 35));
        this.speed = random(5, 12);
    }
    generateSymbols(x, y) {
        let first = round(random(0, 4)) == 1;
        for (let i = 0; i <= this.totalSymbols; i++) {
            let symbol = new Symbol(x, y, this.speed, first);
            this.symbols.push(symbol);
            y -= symbolSize;
            first = false;
        }
    }
    render() {
        this.symbols.forEach(s => {
            if (s.first) fill(180, 255, 180, 255);
            else fill(0, 255, 70, 220);
            text(s.value, s.x, s.y);
            s.rain();
            s.setToRandomSymbol();
        });
    }
}

function setup() {
    createCanvas(windowWidth, windowHeight);
    background(0);
    textSize(symbolSize);
    for (let x = 0; x <= width; x += symbolSize) {
        let stream = new Stream();
        stream.generateSymbols(x, random(-1000, 0));
        streams.push(stream);
    }
    updateList();
    setInterval(updateList, 10000);
}

function draw() {
    background(0, 100); 
    streams.forEach(s => s.render());
}

async function updateList() {
    try {
        const res = await fetch('data.json?t=' + Date.now());
        const data = await res.json();
        document.getElementById('list').innerHTML = data.map(i => `
            <div class="item">
                <div class="time">üïí ${i.time}</div>
                <a href="${GITHUB_BASE}${i.title}.md" target="_blank" class="title-link">> [DECODED] ${i.title}</a>
            </div>
        `).join('');
    } catch (e) { console.log("Á≥ªÁµ±Ëß£Á¢º‰∏≠..."); }
}
function windowResized() { resizeCanvas(windowWidth, windowHeight); }
</script>
</body>
</html>
